<div class="workflow-container">
  <mat-card class="workflow-card">
    <mat-card-header>
      <mat-card-title>Digitize New Product</mat-card-title>
      <mat-card-subtitle>Follow the steps to add a new item to your inventory.</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>

      <!-- Step 1: Scan QR Code -->
      <div class.step *ngIf="!qrCodeScanned">
        <!-- ... (no changes here) ... -->
      </div>

      <!-- Step 2: Select Product Type -->
      <div class="step" *ngIf="qrCodeScanned && !productTypeSelected">
        <!-- ... (no changes here) ... -->
      </div>

      <!-- Step 3: Dynamic Form -->
      <div class="step" *ngIf="productTypeSelected">
        <h3>Step 3: Enter Details for {{ productTypeSelected | titlecase }}</h3>

        <div *ngIf="isLoadingSchema || isSaving" class="spinner-container">
          <mat-spinner diameter="50"></mat-spinner>
          <p>{{ isSaving ? 'Saving product...' : 'Loading form...' }}</p>
        </div>

        <!-- Dynamic Form Component with submit event -->
        <app-dynamic-form
          *ngIf="!isLoadingSchema && !isSaving && formSchema.length > 0"
          [schema]="formSchema"
          (formSubmit)="onSaveProduct($event)">
        </app-dynamic-form>
      </div>

    </mat-card-content>
  </mat-card>
</div>
